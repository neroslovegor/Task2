(function(e){"use strict"
"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(window.jQuery)})(function(e){"use strict"
var t=0,s=["accepts","cache","contents","contentType","crossDomain","data","dataType","headers","ifModified","mimeType","password","processData","timeout","traditional","type","url","username"],o=function(e){return e}
e.ajaxSetup({converters:{"postmessage text":o,"postmessage json":o,"postmessage html":o}}),e.ajaxTransport("postmessage",function(o){if(o.postMessage&&window.postMessage){var a,n=e("<a></a>").prop("href",o.postMessage)[0],r=n.protocol+"//"+n.host,i=o.xhr().upload
return/^(http:\/\/.+:80)|(https:\/\/.+:443)$/.test(r)&&(r=r.replace(/:(80|443)$/,"")),{send:function(n,p){var d={id:"postmessage-transport-"+(t+=1)},c="message."+d.id
a=e('<iframe style="display:none;" src="'+o.postMessage+'" name="'+d.id+'"></iframe>').on("load",function(){e.each(s,function(e,t){d[t]=o[t]}),d.dataType=d.dataType.replace("postmessage ",""),e(window).on(c,function(t){var s,o=t.originalEvent,n=o.data
o.origin===r&&n.id===d.id&&("progress"===n.type?((s=document.createEvent("Event")).initEvent(n.type,!1,!0),e.extend(s,n),i.dispatchEvent(s)):(p(n.status,n.statusText,{postmessage:n.result},n.headers),a.remove(),e(window).off(c)))}),a[0].contentWindow.postMessage(d,r)}).appendTo(document.body)},abort:function(){a&&a.remove()}}}})})
